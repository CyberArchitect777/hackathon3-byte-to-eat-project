<!-- User Dashboard Template-->

<!-- Need to replace mentions of BOOKING to TAKEAWAY equivalent-->


{% extends "base.html" %}

{% block content %}

<!-- Allows User to sort through their Takeaway ratings -->

<!-- Sorting Form -->
<form method="get" class="mb-4">
    <div class="row">
        <h2> Sort by: </h2>
        <div class="col">

            <!-- Options user can sort by -->
            <select name="sort_by" class="form-control">
                <option value="review_date" {% if request.GET.sort_by == "review_date" %}selected{% endif %}>Date
                </option>
                <option value="takeaway_name" {% if request.GET.sort_by == "takeaway_name" %}selected{% endif %}>
                    Takeaway Name</option>
                <option value="food_type" {% if request.GET.sort_by == "food_type" %}selected{% endif %}>food_type
                </option>
                <option value="rating" {% if request.GET.sort_by == "rating" %}selected{% endif %}>Rating</option>
                <option value="order_again" {% if request.GET.sort_by == "order_again" %}selected{% endif %}>Would you
                    order from again?</option>
                <!-- Add more sorting options here as needed -->
            </select>
        </div>

        <!-- Option to sort list by ascending or descending -->
        <div class="col">
            <select name="sort_order" class="form-control">
                <option value="asc" {% if request.GET.sort_order == 'asc' %}selected{% endif %}>Ascending</option>
                <option value="desc" {% if request.GET.sort_order == 'desc' %}selected{% endif %}>Descending</option>
            </select>
        </div>

        <!-- Sort button -->
        <div class="col">
            <button type="submit" class="btn btn-primary">Sort</button>
        </div>

    </div>
</form>


<!-- Displays user's takeaway reviews in an easy to read table-->
<div class="container mt-4">
    <h1 class="text-center">Your Takeaway Reviews</h1>
    {% if reviews %}
    <!-- Change to name of model-->
    <table class="table table-striped table-bordered">
        <thead>
            <tr>
                <th>Review Date</th>
                <th>Takeaway Name</th>
                <th>Food Type</th>
                <th>Rating</th>
                <th>Would you order from here again?</th>
                <th>Notes</th>
                <th>Actions</th>
            </tr>
        </thead>
        <tbody>
            {% for review in reviews %}
            <tr>
                <td>{{ review.review_date }}</td>
                <td>{{ review.takeaway_name }}</td>
                <td>{{ review.food_type }}</td>
                <td>{{ review.rating }}</td>
                <td>{{ review.order_again }}</td>
                <td>{{ review.notes }}</td>
                <td>
                    <!-- Buttons that give the user the option to edit or delete their booking 
                    <a href="{% url 'update_booking' booking.pk %}" class="btn btn-primary btn-sm">Edit</a> This url will need updating
                    <a href="{% url 'delete_booking' booking.pk %}" class="btn btn-danger btn-sm">Delete</a> This url will need updating -->
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <!-- If there are no reviews, this message will display instead -->
    {% else %}
    <p class="text-center">No reviews found. <br> Get started by clicking the button below.</p>
    {% endif %}

    <!-- Make a Review Button -->
    <div class="text-center">
       <a href="https://www.youtube.com/watch?v=xvFZjo5PgG0" class="btn btn-warning btn-lg">Add a Review</a> <!--This url will need updating -->
    </div>
</div>
{% endblock %}